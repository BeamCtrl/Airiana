<!DOCTYPE html>
<html lang="en">

   <head>
      <title>Select Box Control</title>
   </head>
   <script>
      getSSID()
      function getSSID() {
        myVar =   setInterval(getSSID,30000);
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (xhttp.readyState == 4 && xhttp.status == 200) {
            const ssids = xhttp.responseText.split(" ")
            data = "<select name = \"network\">"
            console.log(ssids)
            if (ssids[0] == ""){
                ssids[0] = "Loading Wifi access points..."
            }
            for (let i = 0; i < ssids.length; i++) {
                if(ssids[i] != ""){
                    data += "<option value= \"" + ssids[i] + "\">" + ssids[i] + "</option>";
                }
            }
            data += "</select><br>"
            console.log(data)
            //data = data.replace(/\\n/g,"<br>");
            data = data.replace(/ESSID:/g,"");
            //data = data.replace(/\"/g,"");
            //data = data.replace(/\ /g,"");
            //data = data + "mina ssids"
            document.getElementById("networks").innerHTML = data;
          }
        };
        xhttp.open("GET", "SSID", true);
        xhttp.send();
      }


   </script>
   <body>
      <p>Airiana Wi-Fi access points. Select any one fill in your password and press configure.</p>
      <br>
      <br>
      <form action="http://192.168.1.44:8000/setup" method="post">
         <a>Choose your home Wi-Fi network:</a><br>
         <div id="networks" style="line-height:90%"></div>
         <label for="password">Password:</label>
         <input type="text" id="password" name="Password"><br>
         <input type="submit" value="Configure Airiana"><br><br>
         <div id="networks2" style="line-height:90%"></div>
      </form>
   </body>
</html>